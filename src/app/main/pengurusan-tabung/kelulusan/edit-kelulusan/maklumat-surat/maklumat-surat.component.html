
<form class="form theme-form" name="form" #f="ngForm" (ngSubmit)="f.form.valid && save()" novalidate>
    <div class="row">
        <div class="col-lg-6">
            <div class="form-group">
            <label>No. Rujukan Kelulusan</label>
                <input
                class="form-control"
                type="text"
                name="kelulusan.no_rujukan_kelulusan"
                [(ngModel)]="kelulusan.no_rujukan_kelulusan"
                placeholder="No. Rujukan Kelulusan"
                readonly
                />
            </div>
        </div>
        <div class="col-lg-6">
            <div class="form-group">
                <label>Tabung*</label>
                <div class="input-group">
                    <input
                        class="form-control"
                        type="text"
                        placeholder="Tabung"
                        name="tabung"
                        [(ngModel)]="namaBencana"
                        #bencana="ngModel"
                        [ngClass]="{ 'is-invalid': f.submitted && bencana.invalid }"
                        required
                        readonly
                    />
                    <div class="input-group-append">
                        <button class="btn btn-primary" (click)="addBencana()" type="button">
                            <i class="fa fa-search text-white"></i>
                        </button>
                    </div>
                    <div *ngIf="f.submitted && bencana.invalid" class="invalid-feedback">
                        <div *ngIf="bencana.errors.required">Tabung Wajib Dipilih</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
      <div class="col-lg-6 custom-datepicker custom-datepicker-dropdown">
        <div class="form-group">
          <label>Tarikh Kelulusan (Mula)*</label>
          <div class="input-group">
            <input
              class="form-control"
              placeholder="DD/MM/YYYY"
              name="dp"
              [(ngModel)]="modelMula"
              ngbDatepicker
              [footerTemplate]="footerTemplate"
              #d="ngbDatepicker"
              style="border: 1px solid #efefef !important;"
              #mulaLulus="ngModel"
              [ngClass]="{ 'is-invalid': f.submitted && mulaLulus.invalid }"
              required
            >
            <div class="input-group-append">
              <button class="btn btn-light" (click)="d.toggle()" type="button"><i
                class="fa fa-calendar"></i></button>
            </div>
            <div *ngIf="f.submitted && mulaLulus.invalid" class="invalid-feedback">
                <div *ngIf="mulaLulus.errors.required">Tarikh Kelulusan (Mula) Wajib Dipilih</div>
            </div>
          </div>
        </div>
      </div>
      <ng-template #footerTemplate>
        <hr class="my-0">
        <button class="btn btn-primary btn-sm m-2 float-left" (click)="modelMula = today; d.close()">Hari Ini</button>
        <button class="btn btn-secondary btn-sm m-2 float-right" (click)="d.close()">Tutup</button>
      </ng-template>

      <div class="col-lg-6 custom-datepicker custom-datepicker-dropdown">
        <div class="form-group">
          <label>Tarikh Kelulusan (Tamat)</label>
          <div class="input-group">
            <input
              class="form-control"
              placeholder="DD/MM/YYYY"
              name="dp1"
              [(ngModel)]="modelTamat"
              ngbDatepicker
              [footerTemplate]="footerTemplate2"
              #d1="ngbDatepicker"
              style="border: 1px solid #efefef !important;"
              #mulaLulus="ngModel"
              [ngClass]="{ 'is-invalid': f.submitted && mulaLulus.invalid }"
              required
            >
            <div class="input-group-append">
              <button class="btn btn-light" (click)="d1.toggle()" type="button"><i
                class="fa fa-calendar"></i></button>
            </div>
            <div *ngIf="f.submitted && mulaLulus.invalid" class="invalid-feedback">
                <div *ngIf="mulaLulus.errors.required">Tarikh Kelulusan (Mula) Wajib Dipilih</div>
            </div>
          </div>
        </div>
      </div>
      <ng-template #footerTemplate2>
        <hr class="my-0">
        <button class="btn btn-primary btn-sm m-2 float-left" (click)="modelTamat = today; d1.close()">Hari Ini</button>
        <button class="btn btn-secondary btn-sm m-2 float-right" (click)="d1.close()">Tutup</button>
      </ng-template>
    </div>

    <div class="row">
        <div class="col-lg-6">
          <div class="form-group">
            <label>Jumlah Siling Peruntukan (RM)*</label>
            <input
              class="form-control"
              type="text"
              placeholder="Jumlah Siling Peruntukan"
              name="jumlah_siling"
              [(ngModel)]="kelulusan.jumlah_siling"
              #jumlahSiling="ngModel"
              [ngClass]="{ 'is-invalid': f.submitted && jumlahSiling.invalid }"
              required
              currencyMask
              [options]="{ prefix: 'RM ', align: 'left' }"
              autocomplete="off"
            />
            <div *ngIf="f.submitted && jumlahSiling.invalid" class="invalid-feedback">
              <div *ngIf="jumlahSiling.errors.required">Jumlah Siling Wajib Dipilih</div>
            </div>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="form-group">
            <label>Baki Peruntukan (RM)</label>
            <input
              class="form-control"
              type="text"
              placeholder="Baki Peruntukan"
              name="baki_siling"
              value="RM {{kelulusan.baki_jumlah_siling | number: '1.2-2'}}"
              disabled
            />
          </div>
        </div>
      </div>

    <div class="row">
        <div class="col-lg-6">
            <div class="form-group">
                <label>Status*</label>
                <ng-select
                    placeholder="Sila Pilih"
                    class="js-example-placeholder-multiple"
                    name="status_tabung_kelulusan"
                    [(ngModel)]="kelulusan.status_tabung_kelulusan"
                    #status="ngModel"
                    [ngClass]="{ 'is-invalid': f.submitted && status.invalid }"
                    required>
                    <ng-option [value]='1'>Aktif</ng-option>
                    <ng-option [value]='2'>Tidak Aktif</ng-option>
                    <ng-option [value]='3'>Tamat Tempoh</ng-option>
                </ng-select>
                <div *ngIf="f.submitted && status.invalid" class="invalid-feedback">
                    <div *ngIf="status.errors.required">Status Wajib Dipilih</div>
                </div>
            </div>
        </div>
    </div>
    <hr />

    <div class="row">
      <div class="col-lg-6">
        <div class="form-group">
          <label>Rujukan Surat*</label>
          <input
            class="form-control"
            type="text"
            name="kelulusan.rujukan_surat"
            [(ngModel)]="kelulusan.rujukan_surat"
            #rujukanSurat="ngModel"
            [ngClass]="{ 'is-invalid': f.submitted && rujukanSurat.invalid }"
            placeholder="Rujukan Surat"
            required
          />
          <div *ngIf="f.submitted && rujukanSurat.invalid" class="invalid-feedback">
            <div *ngIf="rujukanSurat.errors.required">Rujukan Surat Wajib Dipilih</div>
          </div>
        </div>
      </div>

      <div class="col-lg-6 custom-datepicker custom-datepicker-dropdown">
        <div class="form-group">
          <label>Tarikh Surat*</label>
          <div class="input-group">
            <input
              class="form-control"
              placeholder="DD/MM/YYYY"
              name="dp2"
              [(ngModel)]="modelSurat"
              ngbDatepicker
              [footerTemplate]="footerTemplate3"
              #d2="ngbDatepicker"
              style="border: 1px solid #efefef !important;"
              #tarikhSurat="ngModel"
              [ngClass]="{ 'is-invalid': f.submitted && tarikhSurat.invalid }"
              required
            >
            <div class="input-group-append">
              <button class="btn btn-light" (click)="d2.toggle()" type="button"><i
                class="fa fa-calendar"></i></button>
            </div>
            <div *ngIf="f.submitted && tarikhSurat.invalid" class="invalid-feedback">
                <div *ngIf="tarikhSurat.errors.required">Tarikh Surat Wajib Dipilih</div>
            </div>
          </div>
        </div>
      </div>
      <ng-template #footerTemplate3>
        <hr class="my-0">
        <button class="btn btn-primary btn-sm m-2 float-left" (click)="modelSurat = today; d2.close()">Hari Ini</button>
        <button class="btn btn-secondary btn-sm m-2 float-right" (click)="d2.close()">Tutup</button>
      </ng-template>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="form-group">
                <label>Perihal Surat*</label>
                <textarea
                    class="form-control input-air-primary"
                    name="kelulusan.perihal_surat"
                    rows="3"
                    [(ngModel)]="kelulusan.perihal_surat"
                    #perihalSurat="ngModel"
                    [ngClass]="{ 'is-invalid': f.submitted && perihalSurat.invalid }"
                    required
                ></textarea>
                <div *ngIf="f.submitted && perihalSurat.invalid" class="invalid-feedback">
                    <div *ngIf="perihalSurat.errors.required">Perihal Surat Wajib Dipilih</div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="form-group">
                <label>Rujukan</label>
                <textarea
                class="form-control input-air-primary"
                name="kelulusan.rujukan"
                rows="3"
                [(ngModel)]="kelulusan.rujukan"
            ></textarea>
            </div>
        </div>
    </div>
    <div class="row no-gutters justify-content-end mt-2">
        <button type="button" class="btn btn-light pull-right mr-2" [routerLink]="['/app/tabung/senarai-kelulusan']">
          Kembali
        </button>
        <button class="btn btn-primary pull-right" type="submit">
          Simpan
        </button>
    </div>
</form>
