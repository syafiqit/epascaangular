<div class="row no-gutters mt-3">
  <div class="col-lg-6 justify-content-start">
    <h6>Maklumat Pembayaran</h6>
  </div>

  <div class="col-lg-6 justify-content-end">
    <button
      type="button"
      class="btn btn-primary pull-right"
      (click)="pilihPembayaran()"
    >
      <i class="fa fa-plus mr-2"></i>
      <b>Pembayaran</b>
    </button>
  </div>
</div>

<div class="row no-gutters align-items-center mt-3">
  <div class="primeng-datatable-container">
    <p-table
      #dataTable
      styleClass="p-datatable-striped"
      [resizableColumns]="true"
      [loading]="primengTableHelper.isLoading"
      (onLazyLoad)="getBayaran($event)"
      [value]="primengTableHelper.records"
      rows="{{primengTableHelper.defaultRecordsCountPerPage}}"
      [paginator]="false"
      [lazy]="true"
      [scrollable]="true"
      ScrollWidth="100%"
      [responsive]="primengTableHelper.isResponsive"
      [resizableColumns]="primengTableHelper.resizableColumns"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 150px" pSortableColumn="no_rujukan_bayaran">
            No. Bayaran
            <p-sortIcon field="no_rujukan_bayaran"></p-sortIcon>
          </th>
          <th style="width: 130px" pSortableColumn="perihal">
            Perihal
            <p-sortIcon field="perihal"></p-sortIcon>
          </th>
          <th style="width: 150px" pSortableColumn="no_rujukan_kelulusan">
            No. Kelulusan
            <p-sortIcon field="no_rujukan_kelulusan"></p-sortIcon>
          </th>
          <th style="width: 110px" pSortableColumn="jumlah">
            Jumlah
            <p-sortIcon field="jumlah"></p-sortIcon>
          </th>
          <th style="width: 150px">Tindakan</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-record="$implicit">
        <tr>
          <td style="width: 150px">
            <span class="p-column-title">No. Bayaran</span>
            {{record.no_rujukan_bayaran}}
          </td>
          <td style="width: 130px">
            <span class="p-column-title">Perihal</span>
            <label *ngIf="record.perihal">{{record.perihal}}</label>
            <label *ngIf="!record.perihal">-</label>
          </td>
          <td style="width: 150px">
            <span class="p-column-title">No. Kelulusan</span>
            {{record.no_rujukan_kelulusan}}
          </td>
          <td style="width: 110px">
            <span class="p-column-title">Jumlah</span>
            RM {{record.jumlah | number: '1.2-2'}}
          </td>
          <td style="width: 150px">
            <div ngbDropdown class="btn-group" role="group" container="body">
              <button
                type="button"
                class="btn btn-primary btn-primeng dropdown-toggle"
                id="action"
                ngbDropdownToggle
              >
                <i class="fa fa-cog"></i>
                <span class="caret"></span>
                Tindakan
              </button>
              <div ngbDropdownMenu aria-labelledby="action">
                <button
                  class="dropdown-item"
                  (click)="padamPembayaran(record.id_tabung_bayaran, record.id_temp, record.jumlah)"
                >
                  Padam
                </button>
              </div>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">Tiada Data</div>
    <div class="primeng-paging-container justify-content-between">
      <p-paginator
        [rows]="primengTableHelper.defaultRecordsCountPerPage"
        #paginator
        (onPageChange)="getBayaran($event)"
        [totalRecords]="primengTableHelper.totalRecordsCount"
        [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage"
      ></p-paginator>
      <span class="total-records-count">Jumlah: {{ primengTableHelper.totalRecordsCount}}</span>
    </div>
  </div>
</div>
